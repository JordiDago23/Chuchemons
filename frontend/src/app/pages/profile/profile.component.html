<div class="container">
  <div class="header">
    <a routerLink="/home" class="back">â† Volver</a>
    <h2>ğŸ‘¤ Mi Perfil</h2>
  </div>

  <div *ngIf="success" class="success">{{ success }}</div>
  <div *ngIf="error" class="error">{{ error }}</div>

  <form (ngSubmit)="onUpdate()">
    <label>Nombre</label>
    <input type="text" [(ngModel)]="form.nombre" name="nombre" />

    <label>Apellidos</label>
    <input type="text" [(ngModel)]="form.apellidos" name="apellidos" />

    <label>Email</label>
    <input type="email" [(ngModel)]="form.email" name="email" />

    <label>Nueva contraseÃ±a (dejar vacÃ­o para no cambiar)</label>
    <input type="password" [(ngModel)]="form.password" name="password" />

    <label>Repetir nueva contraseÃ±a</label>
    <input type="password" [(ngModel)]="form.password_confirmation" name="password_confirmation" />

    <button type="submit" [disabled]="loading">
      {{ loading ? 'Guardando...' : 'Guardar cambios' }}
    </button>
  </form>

  <hr />

  <div class="danger-zone">
    <h3>âš ï¸ Zona de peligro</h3>
    <p>Si te das de baja no podrÃ¡s volver a entrar con este usuario.</p>
    <button class="delete-btn" (click)="confirmDelete()">Darme de baja</button>
  </div>

  <div *ngIf="showConfirm" class="overlay">
    <div class="dialog">
      <h3>Â¿EstÃ¡s seguro?</h3>
      <p>Esta acciÃ³n es irreversible. Tu cuenta serÃ¡ eliminada permanentemente.</p>
      <div class="dialog-actions">
        <button class="cancel-btn" (click)="showConfirm = false">Cancelar</button>
        <button class="confirm-btn" (click)="onDelete()">SÃ­, darme de baja</button>
      </div>
    </div>
  </div>
</div>
